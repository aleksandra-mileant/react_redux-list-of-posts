(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{22:function(t,e,n){},24:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var c=n(8),r=n.n(c),s=n(4),a=(n(22),n(3)),o=n(6),u=n(2),i=n.n(u),l=n(1),j="LOAD_POSTS",p="LOAD_USER",b="LOAD_COMMENTS",d="CHANGE_POST",m="CHANGE_USER",f=function(t){return{type:b,payload:t}},O=function(t){return t.posts},h=function(t){return t.postId},x=function(t){return t.users},v=function(t){return t.userId},y=function(t){return t.comments},_="https://mate.academy/students-api",N=function(){var t=Object(a.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(_,"/comments?postId=").concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(a.a)(i.a.mark((function t(e,n,c,r){var s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(_,"/comments"),{method:"POST",body:JSON.stringify({postId:e,name:n,email:c,body:r}),headers:{"Content-type":"application/json; charset=UTF-8"}});case 2:return s=t.sent,t.abrupt("return",s.json());case 4:case"end":return t.stop()}}),t)})));return function(e,n,c,r){return t.apply(this,arguments)}}(),C=(n(24),n(0)),k=function(t){var e=t.postId,n=t.loadComments,c=Object(l.useState)(""),r=Object(o.a)(c,2),s=r[0],u=r[1],j=Object(l.useState)(""),p=Object(o.a)(j,2),b=p[0],d=p[1],m=Object(l.useState)(""),f=Object(o.a)(m,2),O=f[0],h=f[1],x=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"userName":u(c);break;case"email":d(c);break;case"body":h(c);break;default:throw new Error("Unknown input name: ".concat(n))}},v=function(){var t=Object(a.a)(i.a.mark((function t(c){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,w(e,s,b,O);case 3:t.sent&&n(e),u(""),d(""),h("");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsxs)("form",{className:"NewCommentForm",onSubmit:v,children:[Object(C.jsx)("div",{className:"form-field",children:Object(C.jsx)("input",{type:"text",name:"userName",value:s,placeholder:"Your name",className:"NewCommentForm__input",onChange:x})}),Object(C.jsx)("div",{className:"form-field",children:Object(C.jsx)("input",{type:"text",name:"email",value:b,placeholder:"Your email",className:"NewCommentForm__input",onChange:x})}),Object(C.jsx)("div",{className:"form-field",children:Object(C.jsx)("textarea",{name:"body",value:O,placeholder:"Type comment here",className:"NewCommentForm__input",onChange:x})}),Object(C.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},P=(n(26),function(){var t,e=Object(l.useState)(!1),n=Object(o.a)(e,2),c=n[0],r=n[1],u=Object(s.c)(y),j=Object(s.c)(h),p=Object(s.c)(O),b=Object(s.b)(),d=function(){var t=Object(a.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(j);case 2:e=t.sent,b(f(e));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(l.useEffect)((function(){d()}),[j]);var m=function(){var t=Object(a.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=e,fetch("".concat(_,"/comments/").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 2:return t.t0=b,t.t1=f,t.next=6,N(j);case 6:t.t2=t.sent,t.t3=(0,t.t1)(t.t2),(0,t.t0)(t.t3);case 9:case"end":return t.stop()}var n}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:"PostDetails",children:[Object(C.jsx)("h2",{children:"Post details:"}),j>0&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("section",{className:"PostDetails__post",children:Object(C.jsx)("p",{children:null===(t=p.find((function(t){return t.id===j})))||void 0===t?void 0:t.body})}),Object(C.jsxs)("section",{className:"PostDetails__comments",children:[0===u.length?Object(C.jsx)("button",{type:"button",className:"button",children:"No comments"}):Object(C.jsx)("button",{type:"button",className:"button",onClick:function(){r(!c)},children:c?"Close Comments":"Open comments"}),c&&Object(C.jsx)("ul",{className:"PostDetails__list",children:u.map((function(t){return Object(C.jsxs)("li",{className:"PostDetails__list-item",children:[Object(C.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return m(t.id)},children:"X"}),Object(C.jsx)("p",{children:t.body})]},t.id)}))})]}),Object(C.jsx)("section",{children:Object(C.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(C.jsx)(k,{postId:j,loadComments:d})})})]})]})});function S(t){return E.apply(this,arguments)}function E(){return(E=Object(a.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e){t.next=5;break}return t.next=3,fetch("".concat(_,"/posts?userId=").concat(e));case 3:case 7:return n=t.sent,t.abrupt("return",n.json());case 5:return t.next=7,fetch("".concat(_,"/posts"));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var I=function(){var t=Object(a.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(_,"/users"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(s.b)(),e=Object(s.c)(x),n=Object(s.c)(v);return Object(l.useEffect)((function(){var e=function(){var e=Object(a.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:n=e.sent,t({type:p,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(C.jsxs)("select",{className:"App__user-selector",id:"user-selector",value:n,onChange:function(e){var n;t((n=+e.target.value,{type:m,payload:n}))},children:[Object(C.jsx)("option",{value:"0",children:"All users"}),e.map((function(t){return Object(C.jsx)("option",{value:t.id,children:t.name},t.id)}))]})},A=(n(27),function(){var t=Object(s.c)(v),e=Object(s.c)(h),n=Object(s.c)(O),c=Object(s.b)(),r=function(){var e=Object(a.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:n=e.sent,c({type:j,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){r()}),[t]);var o=function(){var t=Object(a.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c({type:d,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:"PostsList",children:[Object(C.jsx)("h2",{children:"Posts:"}),Object(C.jsx)(g,{}),Object(C.jsx)("ul",{className:"PostsList__list",children:n.map((function(t){return Object(C.jsxs)("li",{className:"PostsList__item",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("b",{children:"[User #".concat(t.userId,"]: ")}),t.title,t.body]}),Object(C.jsx)("button",{type:"button",className:"PostsList__button button",onClick:t.id!==e?function(){return o(t.id)}:function(){return o(0)},children:t.id===e?"Hide":"Show"})]},t.id)}))})]})}),D=function(){return Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)("h1",{children:"Redux list of posts"}),Object(C.jsxs)("main",{className:"App__main",children:[Object(C.jsx)("div",{className:"App__sidebar",children:Object(C.jsx)(A,{})}),Object(C.jsx)("div",{className:"App__content",children:Object(C.jsx)(P,{})})]})]})},L=n(10),T=n(5),F=n(14),U={posts:[],post:null,user:null,comments:[],users:[],userId:0,postId:0},H=Object(F.a)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object(T.a)(Object(T.a)({},t),{},{posts:Object(L.a)(e.payload)});case p:return Object(T.a)(Object(T.a)({},t),{},{users:Object(L.a)(e.payload)});case b:return Object(T.a)(Object(T.a)({},t),{},{comments:Object(L.a)(e.payload)});case m:return Object(T.a)(Object(T.a)({},t),{},{userId:e.payload});case d:return Object(T.a)(Object(T.a)({},t),{},{postId:e.payload});default:return t}})),J=H,R=function(){return Object(C.jsx)(s.a,{store:J,children:Object(C.jsx)(D,{})})};r.a.render(Object(C.jsx)(R,{}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.95e291e1.chunk.js.map